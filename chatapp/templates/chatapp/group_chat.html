{%extends 'chatapp/base.html'%}
{%block title%}
Group Chat
{%endblock title%}
{%block content%}
<div class="container">
    <div class="row">
        <div class="col-sm">
            {%for message in messages%}
                <div class="row">
                    {%if message.sender.id == sender_id%}
                        <div class="col text-right">
                            <div class="name">{{message.sender.username}}</div>
                            {{message.message_text}}
                        </div>
                    {%else%}
                        <div class="col text-left">
                            <div class="name">{{message.sender.username}}</div>
                            {{message.message_text}}
                        </div>
                    {%endif%}
                </div>
            {% endfor %}
        </div>
        <div class="col-sm-2">
            <div>
                {%if user.username == admin %}
                <form method="post" action="{%url 'chatapp:delete_group' group_name%}">
                    {%csrf_token%}
                    <input type="submit" value="Delete Group" class="btn btn-danger">
                </form>
                {%endif%}
            </div>
            <div class="text-center">Members</div>
            {%for member in members%}
                <div class="member-names text-center">
                    {{member.username}}
                </div>
            {%endfor%}
        </div>
    </div>
</div>
<form action="{% url 'chatapp:group_chat_messages' group_name sender_id %}" method="post">
    {%csrf_token%}
    {{form}}
    <input type="submit" value="Send">
</form>
<form action="{%url 'chatapp:group_chat_messages' group_name sender_id %}">
<input type="submit" value="Refresh">
</form>
{%endblock content%}